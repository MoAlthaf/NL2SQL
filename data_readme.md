# Data and Results Documentation

---

##  `data/raw/`

### File(s): `train_spider.json`, `dev.json`, `train_others.json`, `test.json`  
- **Type**: Input  
- **Source**: [Spider Dataset on Yale NLP](https://yale-lily.github.io/spider)  
- **Used by**: Custom preprocessing scripts  
- **Description**: Original Spider dataset JSON files. Each contains natural language questions (`question`), ground truth SQL queries (`query`), and database IDs (`db_id`). These files are merged and cleaned for model training and evaluation.


---

## üõ†Ô∏è `data/scripts/`

### File: `prepare_dataset.py`  
- **Type**: Preprocessing Script  
- **Input**: Files from `data/raw/`  
- **Output**:  
  - `cleaned_dataset.csv` in `data/processed/`  
- **Description**:  
  - Loads and combines the four Spider dataset JSON files.  
  - Filters out invalid rows (e.g., missing SQLite DBs or broken SQL syntax).  
  - Saves a cleaned version as `cleaned_dataset.csv`.    

---


## üßπ `data/processed/`

### File: `cleaned_dataset.csv`  
- **Type**: Intermediate Processed Dataset  
- **Generated by**: Custom script to merge and clean the 4 JSON files  
- **Description**: Combined and cleaned version of all raw Spider files (`dev`, `test`, `train_spider`, `train_others`). Invalid or problematic rows (e.g., missing DB files or broken SQL) are removed.  
- **Columns**:  
  - `db_id`  
  - `question`  
  - `query`  

### File: `final_dataset.csv`  
- **Type**: Working Copy of Cleaned Dataset  
- **Generated by**: Script that copies `cleaned_dataset.csv`  
- **Used by**: `nl2nl.py` for paraphrasing  
- **Description**: Identical to `cleaned_dataset.csv`, this is used as the base input for paraphrasing and inference to ensure reproducibility.

---

##  `data/outputs/`

### File: `output_paraphrased.csv`  
- **Type**: Model Output  
- **Generated by**: `nl2nl.py`  
- **Used by**: `nl2sql.py`  
- **Description**: Paraphrased versions of the natural language questions from `final_dataset.csv`, along with generated SQL and metadata.  
- **Columns**:  
  - `db_id`  
  - `original_nl`  
  - `paraphrased_nl`  
  - `gt_sql`  

---

##  `results/`

### File: `results.csv`  
- **Type**: Final Evaluation Output  
- **Generated by**: `nl2sql.py`  
- **Used by**: Jupyter notebook analysis scripts  
- **Description**: Final evaluation result file after paraphrasing and SQL generation. Used for accuracy reporting, debugging, and analysis.  
- **Columns**:  
  - `db_id`  
  - `original_nl`  
  - `paraphrased_nl`  
  - `gt_sql`  
  - `generated_sql`  
  - `matched`  
  - `attempts`
